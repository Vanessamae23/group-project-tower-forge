//
//  InvulnerabilityPowerUpDelegate.swift
//  TowerForge
//
//  Created by Keith Gan on 31/3/24.
//

import Foundation

class InvulnerabilityPowerUpDelegate: PowerUpNodeDelegate {
    let eventManager: EventManager

    init(eventManager: EventManager) {
        self.eventManager = eventManager
    }

    func powerUpNodeDidSelect() {
        guard let player = eventManager.currentPlayer,
              let remoteEventManager = eventManager.remoteEventManager else {
            let invulnerabilityPowerUp = InvulnerabilityPowerUp()
            eventManager.addTransformation(eventTransformation: invulnerabilityPowerUp)
            return
        }

        let remoteEvent = RemotePowerupEvent(powerup: .Invulnerability, player: .ownPlayer, source: player)
        eventManager.add(remoteEvent)
    }
}
